---
settings:
  secret: 12345
  db:
    blog:
      db: blog
      addr: 100.97.108.34:27018
      user: laisky
      pwd: 1234
    twitter:
      db: twitter
      addr: 100.97.108.34:27018
      user: laisky
      pwd: 1234
    monitor:
      db: monitor
      addr: 100.97.108.34:27018
      user: laisky
      pwd: 1234
    mcp:
      db: mcp
      addr: 127.0.0.1
      user: postgres
      pwd: changeme
  openai:
    base_url: https://api.openai.com/v1
    embedding_model: text-embedding-3-small
  mcp:
    tools:
      web_search:
        enabled: true # Enable/disable web_search tool
      web_fetch:
        enabled: true # Enable/disable web_fetch tool
      ask_user:
        enabled: true # Enable/disable ask_user tool
      get_user_request:
        enabled: true # Enable/disable get_user_request tool
      extract_key_info:
        enabled: true # Enable/disable extract_key_info tool
    extract_key_info:
      enabled: true
      top_k_default: 5
      top_k_limit: 20
      max_materials_size: 1000000
      max_chunk_chars: 1500
      semantic_weight: 0.65
      lexical_weight: 0.35
    files:
      allow_root_wipe: false
      max_payload_bytes: 1048576
      max_file_bytes: 1048576
      max_project_bytes: 104857600
      list_limit_default: 256
      list_limit_max: 2048
      lock_timeout_ms: 2000
      delete_retention_days: 7
      search:
        enabled: true
        limit_default: 5
        limit_max: 20
        vector_candidates: 30
        bm25_candidates: 30
        fallback:
          semantic_weight: 0.65
          lexical_weight: 0.35
        rerank:
          model: rerank-v3.5
          endpoint: https://oneapi.laisky.com/v1/rerank
          timeout_ms: 10000
      index:
        workers: 2
        batch_size: 32
        retry_max: 5
        retry_backoff_ms: 1000
        slo_p95_seconds: 30
      security:
        encryption_keks:
          '1': REPLACE_WITH_BASE64_32BYTE_SECRET
          '2': REPLACE_WITH_NEXT_ROTATED_SECRET # largest KEK ID is used for new encryptions
        credential_cache_prefix: mcp:files:cred
        credential_cache_ttl_seconds: 300
  web:
    url_prefix: /mcp # internal mount path on the Go server
    public_url_prefix: / # set to '/' to hide the prefix in generated links
    sites:
      mcp:
        host: mcp.laisky.com
        title: Laisky MCP
        favicon: https://s3.laisky.com/uploads/2025/12/mcp_icon.png
        theme: mcp
        router: mcp
        public_base_path: /
      sso:
        host: sso.laisky.com
        title: Laisky SSO
        favicon: https://s3.laisky.com/uploads/2025/12/sso_icon.png
        theme: sso
        router: sso
        public_base_path: /
        turnstile_site_key: YOUR_CLOUDFLARE_TURNSTILE_SITE_KEY
        turnstile_secret_key: YOUR_CLOUDFLARE_TURNSTILE_SECRET_KEY
  websearch:
    max_retry: 3 # default: 3
    engines:
      google:
        enabled: true # default: false
        priority: 1 # lower numbers indicate higher priority; default is 1
        api_key: YOUR_GOOGLE_API_KEY
        cx: YOUR_PROGRAMMABLE_SEARCH_ENGINE_ID
      serp_google:
        enabled: true
        priority: 2
        api_key: YOUR_SERP_API_KEY
